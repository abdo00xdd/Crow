{% extends 'base.html' %}
{% load static %}

{% block title %}Create Room - Crow{% endblock %}

{% block content %}
	<h2>Create a Room</h2>

	{% if messages %}
		<ul class="messages">
			{% for message in messages %}
				<li class="{{ message.tags }}">{{ message }}</li>
			{% endfor %}
		</ul>
	{% endif %}

	<form method="post" action="{% url 'create_room' %}">
		{% csrf_token %}
		<div class="form-group">
			<label for="room_name">Room Name</label>
			<input id="room_name" name="room_name" type="text" class="form-control" required />
		</div>

		<div class="form-group">
			<label for="meeting_title">Meeting Title (optional)</label>
			<input id="meeting_title" name="meeting_title" type="text" class="form-control" placeholder="Quick meeting title" />
		</div>

		<div class="form-group">
			<label for="room_type">Room Type</label>
			<select id="room_type" name="room_type" class="form-control">
				<option value="public">Public</option>
				<option value="private">Private</option>
			</select>
		</div>

		<div class="form-group" id="passwordField" style="display:none;">
			<label for="room_password">Password (for private rooms)</label>
			<input id="room_password" name="room_password" type="password" class="form-control" />
		</div>

		<div class="form-group">
			<label for="duration">Duration (minutes)</label>
			<select id="duration" name="duration" class="form-control">
				<option value="15">15</option>
				<option value="30" selected>30</option>
				<option value="45">45</option>
				<option value="60">60</option>
				<option value="120">120</option>
			</select>
		</div>

		<div class="form-actions mt-3">
			<button type="submit" class="btn btn-primary">Create Room</button>
			<a href="{% url 'home' %}" class="btn btn-secondary">Cancel</a>
		</div>
	</form>

	<script>
		document.getElementById('room_type').addEventListener('change', function(e) {
			const pw = document.getElementById('passwordField');
			pw.style.display = e.target.value === 'private' ? 'block' : 'none';
		});
	</script>

{% endblock %}
